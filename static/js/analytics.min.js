!function(){"use strict";var e=window.ZTA||{},i={endpoint:null,siteId:null,debug:!1},t={id:null,startTime:null,pageCount:0,visitorId:null},n={events:[],timer:null};function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=16*Math.random()|0;return("x"===e?i:3&i|8).toString(16)})}function a(){var e=navigator.userAgent,i="desktop";/tablet|ipad|playbook|silk/i.test(e)?i="tablet":/mobile|iphone|ipod|android|blackberry|opera mini|iemobile/i.test(e)&&(i="mobile");var t="Unknown";/firefox/i.test(e)?t="Firefox":/edg/i.test(e)?t="Edge":/chrome/i.test(e)?t="Chrome":/safari/i.test(e)&&(t="Safari");var n="Unknown";return/windows/i.test(e)?n="Windows":/mac/i.test(e)?n="macOS":/linux/i.test(e)?n="Linux":/android/i.test(e)?n="Android":/iphone|ipad/i.test(e)&&(n="iOS"),{type:i,browser:t,os:n,width:window.innerWidth,height:window.innerHeight,lang:navigator.language||"en"}}function r(){var e=document.referrer;if(!e)return{type:"direct",source:null};try{var i=new URL(e).hostname.toLowerCase();return/google\./i.test(i)?{type:"organic",source:"google"}:/bing\./i.test(i)?{type:"organic",source:"bing"}:/facebook\.|fb\./i.test(i)?{type:"social",source:"facebook"}:/twitter\.|t\.co|x\.com/i.test(i)?{type:"social",source:"twitter"}:/linkedin\./i.test(i)?{type:"social",source:"linkedin"}:i===window.location.hostname?{type:"internal",source:i}:{type:"referral",source:i}}catch(i){return{type:"referral",source:e}}}function u(e){i.siteId&&(n.events.push(e),10>n.events.length?(n.timer&&clearTimeout(n.timer),n.timer=setTimeout(c,5e3)):c())}function c(){if(0!==n.events.length){n.timer&&(clearTimeout(n.timer),n.timer=null);var e=n.events;n.events=[],fetch(i.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({batch:!0,siteId:i.siteId,events:e}),keepalive:!0}).catch(function(e){})}}e.init=function(n,a){a=a||{},i.siteId=n,i.endpoint=a.endpoint||"https://ztas.io/api/track",i.debug=a.debug||!1,function(){var e=null,i=Date.now();try{e=JSON.parse(sessionStorage.getItem("zta_session"))}catch(e){}e&&18e5>i-e.lastActivity?(t.id=e.id,t.startTime=e.startTime,t.pageCount=e.pageCount):(t.id=o(),t.startTime=i,t.pageCount=0);var n=localStorage.getItem("zta_visitor");n||(n=o(),localStorage.setItem("zta_visitor",n)),t.visitorId=n,t.pageCount++;try{sessionStorage.setItem("zta_session",JSON.stringify({id:t.id,startTime:t.startTime,pageCount:t.pageCount,lastActivity:i}))}catch(e){}}(),!1!==a.autoTrack&&e.trackPageView(),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&c()})},e.trackPageView=function(e){var n=new URLSearchParams(window.location.search),o={type:"pageview",siteId:i.siteId,url:window.location.href,path:window.location.pathname,title:document.title,referrer:document.referrer||null,sessionId:t.id,visitorId:t.visitorId,pageCount:t.pageCount,device:a(),source:r(),utm:{source:n.get("utm_source"),medium:n.get("utm_medium"),campaign:n.get("utm_campaign")},timestamp:(new Date).toISOString()};if(e)for(var c in e)o[c]=e[c];u(o)},e.track=function(e,n){u({type:"event",siteId:i.siteId,sessionId:t.id,visitorId:t.visitorId,category:"custom",action:e,label:(n=n||{}).label||null,value:n.value||n.amount||null,properties:n,path:window.location.pathname,timestamp:(new Date).toISOString()})},e.trackEvent=function(e,n,o,a){u({type:"event",siteId:i.siteId,sessionId:t.id,visitorId:t.visitorId,category:e,action:n,label:o||null,value:a||null,path:window.location.pathname,timestamp:(new Date).toISOString()})},window.ZTA=e;var s,d=document.currentScript||(s=document.getElementsByTagName("script"))[s.length-1];if(d){var l=d.getAttribute("data-site-id");l&&e.init(l,{autoTrack:"false"!==d.getAttribute("data-auto-track"),debug:"true"===d.getAttribute("data-debug")})}}();