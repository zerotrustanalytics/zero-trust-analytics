!function(){"use strict";var e=window.ZTA||{},t={endpoint:null,siteId:null,debug:!1},n={id:null,startTime:null,pageCount:0,visitorId:null},i={events:[],timer:null};function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function r(){var e=navigator.userAgent,t="desktop";/tablet|ipad|playbook|silk/i.test(e)?t="tablet":/mobile|iphone|ipod|android|blackberry|opera mini|iemobile/i.test(e)&&(t="mobile");var n="Unknown";/firefox/i.test(e)?n="Firefox":/edg/i.test(e)?n="Edge":/chrome/i.test(e)?n="Chrome":/safari/i.test(e)&&(n="Safari");var i="Unknown";return/windows/i.test(e)?i="Windows":/mac/i.test(e)?i="macOS":/linux/i.test(e)?i="Linux":/android/i.test(e)?i="Android":/iphone|ipad/i.test(e)&&(i="iOS"),{type:t,browser:n,os:i,width:window.innerWidth,height:window.innerHeight,lang:navigator.language||"en"}}function a(){var e=document.referrer;if(!e)return{type:"direct",source:null};try{var t=new URL(e).hostname.toLowerCase();return/google\./i.test(t)?{type:"organic",source:"google"}:/bing\./i.test(t)?{type:"organic",source:"bing"}:/facebook\.|fb\./i.test(t)?{type:"social",source:"facebook"}:/twitter\.|t\.co|x\.com/i.test(t)?{type:"social",source:"twitter"}:/linkedin\./i.test(t)?{type:"social",source:"linkedin"}:t===window.location.hostname?{type:"internal",source:t}:{type:"referral",source:t}}catch(t){return{type:"referral",source:e}}}function u(e){t.siteId&&(i.events.push(e),10>i.events.length?(i.timer&&clearTimeout(i.timer),i.timer=setTimeout(c,5e3)):c())}function c(){if(0!==i.events.length){i.timer&&(clearTimeout(i.timer),i.timer=null);var e=i.events;i.events=[],fetch(t.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({batch:!0,siteId:t.siteId,events:e}),keepalive:!0}).catch(function(e){})}}function d(){(function(){for(var e=[function(){var e=document.title.toLowerCase();return e.includes("404")||e.includes("not found")||e.includes("page not found")},function(){var e=document.querySelector("h1");if(e){var t=e.textContent.toLowerCase();return t.includes("404")||t.includes("not found")}return!1},function(){var e=document.body;if(e){var t=e.className.toLowerCase();return t.includes("error-404")||t.includes("not-found")||t.includes("page-not-found")}return!1},function(){var e=document.querySelector('meta[name="prerender-status-code"]');return!!e&&"404"===e.getAttribute("content")}],t=0;e.length>t;t++)if(e[t]())return!0;return!1})()&&e.track404()}e.init=function(i,r){r=r||{},t.siteId=i,t.endpoint=r.endpoint||"https://ztas.io/api/track",t.debug=r.debug||!1,function(){var e=null,t=Date.now();try{e=JSON.parse(sessionStorage.getItem("zta_session"))}catch(e){}e&&18e5>t-e.lastActivity?(n.id=e.id,n.startTime=e.startTime,n.pageCount=e.pageCount):(n.id=o(),n.startTime=t,n.pageCount=0);var i=localStorage.getItem("zta_visitor");i||(i=o(),localStorage.setItem("zta_visitor",i)),n.visitorId=i,n.pageCount++;try{sessionStorage.setItem("zta_session",JSON.stringify({id:n.id,startTime:n.startTime,pageCount:n.pageCount,lastActivity:t}))}catch(e){}}(),!1!==r.autoTrack&&e.trackPageView(),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&c()}),!1!==r.auto404&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d())},e.trackPageView=function(e){var i=new URLSearchParams(window.location.search),o={type:"pageview",siteId:t.siteId,url:window.location.href,path:window.location.pathname,title:document.title,referrer:document.referrer||null,sessionId:n.id,visitorId:n.visitorId,pageCount:n.pageCount,device:r(),source:a(),utm:{source:i.get("utm_source"),medium:i.get("utm_medium"),campaign:i.get("utm_campaign")},timestamp:(new Date).toISOString()};if(e)for(var c in e)o[c]=e[c];u(o)},e.track=function(e,i){u({type:"event",siteId:t.siteId,sessionId:n.id,visitorId:n.visitorId,category:"custom",action:e,label:(i=i||{}).label||null,value:i.value||i.amount||null,properties:i,path:window.location.pathname,timestamp:(new Date).toISOString()})},e.trackEvent=function(e,i,o,r){u({type:"event",siteId:t.siteId,sessionId:n.id,visitorId:n.visitorId,category:e,action:i,label:o||null,value:r||null,path:window.location.pathname,timestamp:(new Date).toISOString()})},e.track404=function(e){var n=(e=e||{}).url||window.location.pathname,i=e.referrer||document.referrer||null,o=t.endpoint.replace("/track","/errors");fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({site_id:t.siteId,type:"404",url:n,referrer:i,user_agent:navigator.userAgent}),keepalive:!0}).catch(function(e){})},e.trackError=function(e,n){var i=(n=n||{}).url||window.location.pathname,o=t.endpoint.replace("/track","/errors");fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({site_id:t.siteId,type:e,url:i,referrer:n.referrer||document.referrer||null,user_agent:navigator.userAgent,message:n.message||null,stack:n.stack||null,metadata:n.metadata||null}),keepalive:!0}).catch(function(e){})},window.ZTA=e;var s,l=document.currentScript||(s=document.getElementsByTagName("script"))[s.length-1];if(l){var p=l.getAttribute("data-site-id");p&&e.init(p,{autoTrack:"false"!==l.getAttribute("data-auto-track"),debug:"true"===l.getAttribute("data-debug")})}}();