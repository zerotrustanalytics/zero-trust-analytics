// Zero Trust Analytics - Accessibility Styles

// ===========================================
// Skip Links
// ===========================================

.skip-link {
  position: absolute;
  top: -100%;
  left: 50%;
  transform: translateX(-50%);
  background: $primary;
  color: $white;
  padding: $spacer-sm $spacer-md;
  border-radius: $border-radius;
  z-index: 10000;
  font-weight: $font-weight-semibold;
  text-decoration: none;
  transition: top 0.2s ease;

  &:focus {
    top: $spacer-sm;
    outline: 3px solid $warning;
    outline-offset: 2px;
  }
}

// ===========================================
// Focus Indicators
// ===========================================

// High visibility focus for all interactive elements
*:focus {
  outline: none;
}

*:focus-visible {
  outline: 3px solid $primary;
  outline-offset: 2px;
}

// Specific focus styles for different elements
a:focus-visible,
button:focus-visible,
[role="button"]:focus-visible {
  outline: 3px solid $primary;
  outline-offset: 2px;
}

// Form controls
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
.form-control:focus,
.form-select:focus {
  outline: 3px solid $primary;
  outline-offset: 0;
  border-color: $primary;
  box-shadow: 0 0 0 0.2rem $primary-light;
}

// Nav links - ensure visibility on dark backgrounds
.navbar-dark .nav-link:focus-visible {
  outline: 3px solid $white;
  outline-offset: 2px;
  border-radius: $border-radius-sm;
}

// Button focus in button groups
.btn-group .btn:focus-visible {
  z-index: 3;
}

// Card and table focus
.card:focus-visible,
[tabindex]:focus-visible {
  outline: 3px solid $primary;
  outline-offset: 2px;
}

// ===========================================
// Color Contrast Overrides
// ===========================================

// Ensure sufficient contrast for muted text (4.5:1 minimum)
.text-muted {
  color: #595959 !important; // 7:1 contrast on white
}

// Footer text - ensure readability
.footer-description,
.footer-links a {
  color: #b0b8c4; // 4.6:1 contrast on dark background
}

// Stat comparison colors with sufficient contrast
.stat-change {
  &.positive,
  .up {
    color: #0a7b3e; // Darker green for better contrast
  }

  &.negative,
  .down {
    color: #c41e3a; // Darker red for better contrast
  }
}

// ===========================================
// Screen Reader Only
// ===========================================

.sr-only,
.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sr-only-focusable:focus,
.visually-hidden-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

// ===========================================
// Reduced Motion
// ===========================================

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

// ===========================================
// High Contrast Mode Support
// ===========================================

@media (prefers-contrast: high) {
  .btn-primary {
    border: 2px solid currentColor;
  }

  .card,
  .stat-card,
  .data-table {
    border: 2px solid $gray-900;
  }

  a {
    text-decoration: underline;
  }
}

// ===========================================
// Form Validation Accessibility
// ===========================================

// Error states with icon and color
.is-invalid {
  border-color: $danger !important;
  padding-right: calc(1.5em + 0.75rem);
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right calc(0.375em + 0.1875rem) center;
  background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
}

// Invalid feedback - ensure it's announced
.invalid-feedback {
  display: none;
  width: 100%;
  margin-top: $spacer-xs;
  font-size: $font-size-sm;
  color: $danger;
}

.is-invalid ~ .invalid-feedback {
  display: block;
}

// Ensure error alerts have proper roles
.alert[role="alert"] {
  // Already has role, ensure it's visually distinct
  border-left: 4px solid currentColor;
}

// ===========================================
// Interactive Element Sizing (Touch Targets)
// ===========================================

// Minimum 44x44px touch targets for mobile
@media (max-width: $breakpoint-md) {
  .btn,
  .nav-link,
  .form-check-input,
  .dropdown-item {
    min-height: 44px;
    min-width: 44px;
    padding: $spacer-sm $spacer-md;
  }

  .navbar-toggler {
    min-height: 44px;
    min-width: 44px;
  }
}
