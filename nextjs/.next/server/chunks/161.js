exports.id=161,exports.ids=[161],exports.modules={5071:(e,r,s)=>{Promise.resolve().then(s.bind(s,3405))},3319:(e,r,s)=>{Promise.resolve().then(s.bind(s,2361))},2361:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});var t=s(5512),a=s(2450);function i({children:e}){return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,t.jsx)(a.Bx,{}),(0,t.jsx)("main",{className:"md:ml-64 p-4 md:p-8 transition-all",role:"main",children:e})]})}},2450:(e,r,s)=>{"use strict";s.d(r,{Bx:()=>c,uF:()=>p});var t=s(5512),a=s(8009),i=s(8531),n=s.n(i),o=s(9334),l=s(2281);let d=[{title:"Analytics",items:[{label:"Dashboard",href:"/dashboard",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{label:"Sites",href:"/dashboard/sites",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})})},{label:"Real-time",href:"/dashboard/realtime",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}]},{title:"Data",items:[{label:"Reports",href:"/dashboard/reports",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{label:"Import",href:"/dashboard/import",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})},{label:"Annotations",href:"/dashboard/annotations",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})},{label:"API Keys",href:"/dashboard/api-keys",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}]},{title:"Settings",items:[{label:"Account",href:"/dashboard/settings",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{label:"Billing",href:"/dashboard/billing",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})},{label:"Team",href:"/dashboard/team",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}]}];function c({onLogout:e}){let r=(0,o.usePathname)(),s=(0,o.useRouter)(),[i,c]=(0,a.useState)(!1),h=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),e?.(),s.push("/login")}catch(e){console.error("Logout failed:",e)}};return(0,t.jsx)("aside",{className:(0,l.$)("fixed left-0 top-0 z-40 h-screen border-r bg-white dark:bg-gray-800 dark:border-gray-700 transition-all duration-300",i?"w-16":"w-64"),children:(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[(0,t.jsx)(n(),{href:"/dashboard",className:(0,l.$)("font-bold text-primary transition-all",i?"text-lg":"text-xl"),children:i?"Z":"ZTA"}),(0,t.jsx)("button",{onClick:()=>c(!i),className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":i?"Expand sidebar":"Collapse sidebar",children:(0,t.jsx)("svg",{className:(0,l.$)("w-5 h-5 transition-transform",i&&"rotate-180"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),(0,t.jsx)("nav",{className:"flex-1 p-4 space-y-6 overflow-y-auto",role:"navigation",children:d.map(e=>(0,t.jsxs)("div",{children:[!i&&(0,t.jsx)("h3",{className:"px-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:e.title}),(0,t.jsx)("ul",{className:"space-y-1",children:e.items.map(e=>{let s=r===e.href||r.startsWith(e.href+"/");return(0,t.jsx)("li",{children:(0,t.jsxs)(n(),{href:e.href,className:(0,l.$)("flex items-center rounded-lg transition-colors",i?"justify-center p-2":"gap-3 px-4 py-2",s?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-foreground"),title:i?e.label:void 0,children:[(0,t.jsx)("span",{className:"flex-shrink-0",children:e.icon}),!i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"flex-1",children:e.label}),e.badge&&(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium bg-primary text-primary-foreground rounded-full",children:e.badge})]})]})},e.href)})})]},e.title))}),(0,t.jsx)("div",{className:"p-4 border-t dark:border-gray-700",children:(0,t.jsxs)("button",{onClick:h,className:(0,l.$)("flex items-center text-red-600 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",i?"justify-center p-2 w-full":"gap-3 px-4 py-2 w-full"),title:i?"Logout":void 0,children:[(0,t.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),!i&&(0,t.jsx)("span",{children:"Logout"})]})})]})})}var h=s(1005);function x({site:e,onView:r,onEdit:s,onDelete:i,onViewSnippet:n,loading:o=!1,selected:d=!1}){var c;let[x,m]=(0,a.useState)(!1),u=(0,a.useCallback)(()=>{o||x||!r||(m(!0),r(e.id))},[o,x,r,e.id]),p=(0,a.useCallback)(()=>{o||x||!s||(m(!0),s(e.id))},[o,x,s,e.id]),g=(0,a.useCallback)(()=>{o||x||!i||(m(!0),i(e.id))},[o,x,i,e.id]),j=(0,a.useCallback)(()=>{o||x||!n||(m(!0),n(e.id))},[o,x,n,e.id]);return(0,t.jsxs)("div",{"data-testid":"site-card","aria-label":`Site card for ${e.name}`,className:(0,l.$)("border rounded-lg p-4 transition-all duration-200 hover:shadow-lg",o&&"opacity-50 pointer-events-none",d&&"ring-2 ring-primary","focus:outline-none focus:ring-2 focus:ring-primary"),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground truncate",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.domain}),e.trackingId&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.trackingId}),e.createdAt&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:(c=e.createdAt)?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]}),!1===e.isActive&&(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",children:"Inactive"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-foreground",children:(e.pageviews??0).toLocaleString()}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Pageviews"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-foreground",children:(e.visitors??0).toLocaleString()}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Visitors"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4 border-t border-border",children:[(0,t.jsx)(h.$n,{variant:"outline",size:"sm",onClick:u,disabled:o,className:"flex-1 focus:ring-2 focus:ring-primary","aria-label":"View Analytics",children:"View Analytics"}),(0,t.jsx)(h.$n,{variant:"outline",size:"sm",onClick:j,disabled:o,className:"focus:ring-2 focus:ring-primary","aria-label":"Snippet",children:"Snippet"}),(0,t.jsx)(h.$n,{variant:"ghost",size:"sm",onClick:p,disabled:o,className:"focus:ring-2 focus:ring-primary","aria-label":"Edit",children:"Edit"}),(0,t.jsx)(h.$n,{variant:"ghost",size:"sm",onClick:g,disabled:o,className:"text-red-600 hover:text-red-700 focus:ring-2 focus:ring-primary","aria-label":"Delete",children:"Delete"})]})]})}function m({isOpen:e,onClose:r,onSuccess:s}){let[i,n]=(0,a.useState)(""),[o,l]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[x,m]=(0,a.useState)(!1),u=e=>/^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/.test(e),p=async e=>{e.preventDefault(),c("");let r=i.replace(/^https?:\/\//,"").replace(/\/.*$/,"");if(!r){c("Domain is required");return}if(!u(r)){c("Please enter a valid domain (e.g., example.com)");return}m(!0);try{let e=await fetch("/api/sites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:r,name:o||r})}),t=await e.json();if(!e.ok){c(t.error||"Failed to add site");return}s?.(t.site),g()}catch{c("An error occurred. Please try again.")}finally{m(!1)}},g=()=>{n(""),l(""),c(""),r()};return(0,t.jsx)(h.aF,{isOpen:e,onClose:g,title:"Add New Site",description:"Enter your website details to start tracking analytics",children:(0,t.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[d&&(0,t.jsx)(h.Fc,{variant:"error",children:d}),(0,t.jsx)(h.pd,{label:"Domain",type:"text",value:i,onChange:e=>n(e.target.value),placeholder:"example.com",disabled:x,hint:"Enter your domain without http:// or https://"}),(0,t.jsx)(h.pd,{label:"Site Name (optional)",type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"My Website",disabled:x,hint:"A friendly name to identify your site"}),(0,t.jsxs)(h.jl,{children:[(0,t.jsx)(h.$n,{type:"button",variant:"outline",onClick:g,disabled:x,children:"Cancel"}),(0,t.jsx)(h.$n,{type:"submit",loading:x,children:"Add Site"})]})]})})}function u({isOpen:e,onClose:r,siteId:s,domain:i}){let[n,o]=(0,a.useState)(!1),l=`<script defer data-site="${s}" src="https://ztas.io/s.js"></script>`,d=async()=>{try{await navigator.clipboard.writeText(l),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy:",e)}};return(0,t.jsxs)(h.aF,{isOpen:e,onClose:r,title:"Tracking Snippet",description:i?`Add this snippet to ${i}`:"Add this snippet to your website",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("pre",{className:"p-4 bg-gray-900 text-gray-100 rounded-lg overflow-x-auto text-sm",children:(0,t.jsx)("code",{children:l})}),(0,t.jsx)(h.$n,{variant:"secondary",size:"sm",onClick:d,className:"absolute top-2 right-2",children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]})})]}),(0,t.jsx)(h.Fc,{variant:"info",title:"Installation Instructions",children:(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:[(0,t.jsx)("li",{children:"Copy the snippet above"}),(0,t.jsxs)("li",{children:["Paste it into the ",(0,t.jsx)("code",{className:"px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded",children:"<head>"})," section of your HTML"]}),(0,t.jsx)("li",{children:"Deploy your changes"}),(0,t.jsx)("li",{children:"Visit your site to verify tracking is working"})]})}),(0,t.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Alternative Installation Methods"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsx)("a",{href:"https://docs.ztas.io/install/nextjs",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Next.js"}),(0,t.jsx)("a",{href:"https://docs.ztas.io/install/gatsby",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Gatsby"}),(0,t.jsx)("a",{href:"https://docs.ztas.io/install/wordpress",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"WordPress"}),(0,t.jsx)("a",{href:"https://docs.ztas.io/install/shopify",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Shopify"})]})]})]}),(0,t.jsx)(h.jl,{children:(0,t.jsx)(h.$n,{variant:"outline",onClick:r,children:"Close"})})]})}function p({sites:e,loading:r,onSiteAdded:s}){let i=(0,o.useRouter)(),[n,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),j=e=>{i.push(`/dashboard/sites/${e}`)},f=r=>{let s=e.find(e=>e.id===r);s&&(g(s),c(!0))},v=e=>{i.push(`/dashboard/sites/${e}/settings`)};return r?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(h.y$,{size:"lg"})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Your Sites"}),(0,t.jsxs)(h.$n,{onClick:()=>l(!0),children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Site"]})]}),0===e.length?(0,t.jsxs)("div",{className:"text-center py-16 bg-white dark:bg-gray-800 rounded-lg border border-border",children:[(0,t.jsx)("svg",{className:"w-16 h-16 mx-auto text-muted-foreground mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),(0,t.jsx)("h2",{className:"text-xl font-medium mb-2",children:"No sites yet"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Get started by adding your first site to track"}),(0,t.jsx)(h.$n,{onClick:()=>l(!0),size:"lg",children:"Add Your First Site"})]}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,t.jsx)(x,{site:e,onView:j,onViewSnippet:f,onEdit:v},e.id))}),(0,t.jsx)(m,{isOpen:n,onClose:()=>l(!1),onSuccess:e=>{s?.({...e,pageviews:0,visitors:0,status:"pending"}),l(!1),g({...e,pageviews:0,visitors:0}),c(!0)}}),(0,t.jsx)(u,{isOpen:d,onClose:()=>{c(!1),g(null)},siteId:p?.id||"",domain:p?.domain})]})}},3405:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jasonsutter/Documents/Companies/ZTA.io/zero-trust-analytics/nextjs/src/app/dashboard/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jasonsutter/Documents/Companies/ZTA.io/zero-trust-analytics/nextjs/src/app/dashboard/layout.tsx","default")}};