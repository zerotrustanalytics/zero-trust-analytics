(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[514],{9275:(e,t,a)=>{Promise.resolve().then(a.bind(a,7653))},7653:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(5155),i=a(5038),r=a(9141);function o(){let{sites:e,loading:t}=(0,r.u0)();return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Sites"}),(0,s.jsx)(i.uF,{sites:e.map(e=>({...e,status:"active"})),loading:t,onSiteAdded:()=>{}})]})}},9141:(e,t,a)=>{"use strict";a.d(t,{u0:()=>i});var s=a(2115);function i(){let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)(!0),[r,o]=(0,s.useState)(null),n=(0,s.useCallback)(async()=>{i(!0),o(null);try{let e=await fetch("/api/sites");if(!e.ok)throw Error("Failed to fetch sites");let a=await e.json();t(a.sites||[])}catch(e){o(e instanceof Error?e.message:"Failed to fetch sites"),t([])}finally{i(!1)}},[]);return(0,s.useEffect)(()=>{n()},[n]),{sites:e,loading:a,error:r,addSite:async(e,a)=>{try{let s=await fetch("/api/sites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:e,name:a})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to add site")}let i={...(await s.json()).site,pageviews:0,visitors:0,status:"pending"};return t(e=>[...e,i]),i}catch(e){return o(e instanceof Error?e.message:"Failed to add site"),null}},deleteSite:async e=>{try{let a=await fetch("/api/sites/".concat(e),{method:"DELETE"});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to delete site")}return t(t=>t.filter(t=>t.id!==e)),!0}catch(e){return o(e instanceof Error?e.message:"Failed to delete site"),!1}},updateSite:async(e,a)=>{try{let s=await fetch("/api/sites/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to update site")}return t(t=>t.map(t=>t.id===e?{...t,...a}:t)),!0}catch(e){return o(e instanceof Error?e.message:"Failed to update site"),!1}},refresh:async()=>{await n()}}}a(6046)}},e=>{var t=t=>e(e.s=t);e.O(0,[173,121,38,441,517,358],()=>t(9275)),_N_E=e.O()}]);