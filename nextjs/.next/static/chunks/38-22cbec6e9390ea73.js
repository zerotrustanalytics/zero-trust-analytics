"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{5038:(e,r,s)=>{s.d(r,{Bx:()=>c,uF:()=>p});var t=s(5155),a=s(2115),i=s(8173),n=s.n(i),o=s(6046),l=s(3463);let d=[{title:"Analytics",items:[{label:"Dashboard",href:"/dashboard",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{label:"Sites",href:"/dashboard/sites",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})})},{label:"Real-time",href:"/dashboard/realtime",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}]},{title:"Data",items:[{label:"Reports",href:"/dashboard/reports",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{label:"Import",href:"/dashboard/import",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})},{label:"Annotations",href:"/dashboard/annotations",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})},{label:"API Keys",href:"/dashboard/api-keys",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}]},{title:"Settings",items:[{label:"Account",href:"/dashboard/settings",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{label:"Billing",href:"/dashboard/billing",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})},{label:"Team",href:"/dashboard/team",icon:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}]}];function c(e){let{onLogout:r}=e,s=(0,o.usePathname)(),i=(0,o.useRouter)(),[c,h]=(0,a.useState)(!1),x=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),null==r||r(),i.push("/login")}catch(e){console.error("Logout failed:",e)}};return(0,t.jsx)("aside",{className:(0,l.$)("fixed left-0 top-0 z-40 h-screen border-r bg-white dark:bg-gray-800 dark:border-gray-700 transition-all duration-300",c?"w-16":"w-64"),children:(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[(0,t.jsx)(n(),{href:"/dashboard",className:(0,l.$)("font-bold text-primary transition-all",c?"text-lg":"text-xl"),children:c?"Z":"ZTA"}),(0,t.jsx)("button",{onClick:()=>h(!c),className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":c?"Expand sidebar":"Collapse sidebar",children:(0,t.jsx)("svg",{className:(0,l.$)("w-5 h-5 transition-transform",c&&"rotate-180"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})]}),(0,t.jsx)("nav",{className:"flex-1 p-4 space-y-6 overflow-y-auto",role:"navigation",children:d.map(e=>(0,t.jsxs)("div",{children:[!c&&(0,t.jsx)("h3",{className:"px-4 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:e.title}),(0,t.jsx)("ul",{className:"space-y-1",children:e.items.map(e=>{let r=s===e.href||s.startsWith(e.href+"/");return(0,t.jsx)("li",{children:(0,t.jsxs)(n(),{href:e.href,className:(0,l.$)("flex items-center rounded-lg transition-colors",c?"justify-center p-2":"gap-3 px-4 py-2",r?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-foreground"),title:c?e.label:void 0,children:[(0,t.jsx)("span",{className:"flex-shrink-0",children:e.icon}),!c&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"flex-1",children:e.label}),e.badge&&(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium bg-primary text-primary-foreground rounded-full",children:e.badge})]})]})},e.href)})})]},e.title))}),(0,t.jsx)("div",{className:"p-4 border-t dark:border-gray-700",children:(0,t.jsxs)("button",{onClick:x,className:(0,l.$)("flex items-center text-red-600 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",c?"justify-center p-2 w-full":"gap-3 px-4 py-2 w-full"),title:c?"Logout":void 0,children:[(0,t.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),!c&&(0,t.jsx)("span",{children:"Logout"})]})})]})})}var h=s(8348);function x(e){var r,s,i;let{site:n,onView:o,onEdit:d,onDelete:c,onViewSnippet:x,loading:m=!1,selected:u=!1}=e,[p,g]=(0,a.useState)(!1),j=(0,a.useCallback)(()=>{m||p||!o||(g(!0),o(n.id))},[m,p,o,n.id]),v=(0,a.useCallback)(()=>{m||p||!d||(g(!0),d(n.id))},[m,p,d,n.id]),f=(0,a.useCallback)(()=>{m||p||!c||(g(!0),c(n.id))},[m,p,c,n.id]),b=(0,a.useCallback)(()=>{m||p||!x||(g(!0),x(n.id))},[m,p,x,n.id]);return(0,t.jsxs)("div",{"data-testid":"site-card","aria-label":"Site card for ".concat(n.name),className:(0,l.$)("border rounded-lg p-4 transition-all duration-200 hover:shadow-lg",m&&"opacity-50 pointer-events-none",u&&"ring-2 ring-primary","focus:outline-none focus:ring-2 focus:ring-primary"),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground truncate",children:n.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:n.domain}),n.trackingId&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:n.trackingId}),n.createdAt&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:(i=n.createdAt)?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]}),!1===n.isActive&&(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400",children:"Inactive"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-foreground",children:(null!==(r=n.pageviews)&&void 0!==r?r:0).toLocaleString()}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Pageviews"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-foreground",children:(null!==(s=n.visitors)&&void 0!==s?s:0).toLocaleString()}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Visitors"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4 border-t border-border",children:[(0,t.jsx)(h.$n,{variant:"outline",size:"sm",onClick:j,disabled:m,className:"flex-1 focus:ring-2 focus:ring-primary","aria-label":"View Analytics",children:"View Analytics"}),(0,t.jsx)(h.$n,{variant:"outline",size:"sm",onClick:b,disabled:m,className:"focus:ring-2 focus:ring-primary","aria-label":"Snippet",children:"Snippet"}),(0,t.jsx)(h.$n,{variant:"ghost",size:"sm",onClick:v,disabled:m,className:"focus:ring-2 focus:ring-primary","aria-label":"Edit",children:"Edit"}),(0,t.jsx)(h.$n,{variant:"ghost",size:"sm",onClick:f,disabled:m,className:"text-red-600 hover:text-red-700 focus:ring-2 focus:ring-primary","aria-label":"Delete",children:"Delete"})]})]})}function m(e){let{isOpen:r,onClose:s,onSuccess:i}=e,[n,o]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[c,x]=(0,a.useState)(""),[m,u]=(0,a.useState)(!1),p=e=>/^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/.test(e),g=async e=>{e.preventDefault(),x("");let r=n.replace(/^https?:\/\//,"").replace(/\/.*$/,"");if(!r){x("Domain is required");return}if(!p(r)){x("Please enter a valid domain (e.g., example.com)");return}u(!0);try{let e=await fetch("/api/sites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:r,name:l||r})}),s=await e.json();if(!e.ok){x(s.error||"Failed to add site");return}null==i||i(s.site),j()}catch(e){x("An error occurred. Please try again.")}finally{u(!1)}},j=()=>{o(""),d(""),x(""),s()};return(0,t.jsx)(h.aF,{isOpen:r,onClose:j,title:"Add New Site",description:"Enter your website details to start tracking analytics",children:(0,t.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[c&&(0,t.jsx)(h.Fc,{variant:"error",children:c}),(0,t.jsx)(h.pd,{label:"Domain",type:"text",value:n,onChange:e=>o(e.target.value),placeholder:"example.com",disabled:m,hint:"Enter your domain without http:// or https://"}),(0,t.jsx)(h.pd,{label:"Site Name (optional)",type:"text",value:l,onChange:e=>d(e.target.value),placeholder:"My Website",disabled:m,hint:"A friendly name to identify your site"}),(0,t.jsxs)(h.jl,{children:[(0,t.jsx)(h.$n,{type:"button",variant:"outline",onClick:j,disabled:m,children:"Cancel"}),(0,t.jsx)(h.$n,{type:"submit",loading:m,children:"Add Site"})]})]})})}function u(e){let{isOpen:r,onClose:s,siteId:i,domain:n}=e,[o,l]=(0,a.useState)(!1),d='<script defer data-site="'.concat(i,'" src="https://ztas.io/s.js"><\/script>'),c=async()=>{try{await navigator.clipboard.writeText(d),l(!0),setTimeout(()=>l(!1),2e3)}catch(e){console.error("Failed to copy:",e)}};return(0,t.jsxs)(h.aF,{isOpen:r,onClose:s,title:"Tracking Snippet",description:n?"Add this snippet to ".concat(n):"Add this snippet to your website",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("pre",{className:"p-4 bg-gray-900 text-gray-100 rounded-lg overflow-x-auto text-sm",children:(0,t.jsx)("code",{children:d})}),(0,t.jsx)(h.$n,{variant:"secondary",size:"sm",onClick:c,className:"absolute top-2 right-2",children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy"]})})]}),(0,t.jsx)(h.Fc,{variant:"info",title:"Installation Instructions",children:(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:[(0,t.jsx)("li",{children:"Copy the snippet above"}),(0,t.jsxs)("li",{children:["Paste it into the ",(0,t.jsx)("code",{className:"px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded",children:"<head>"})," section of your HTML"]}),(0,t.jsx)("li",{children:"Deploy your changes"}),(0,t.jsx)("li",{children:"Visit your site to verify tracking is working"})]})}),(0,t.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Alternative Installation Methods"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsx)("a",{href:"https://docs.ztas.io/install/nextjs",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Next.js"}),(0,t.jsx)("a",{href:"https://docs.ztas.io/install/gatsby",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Gatsby"}),(0,t.jsx)("a",{href:"https://docs.ztas.io/install/wordpress",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"WordPress"}),(0,t.jsx)("a",{href:"https://docs.ztas.io/install/shopify",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Shopify"})]})]})]}),(0,t.jsx)(h.jl,{children:(0,t.jsx)(h.$n,{variant:"outline",onClick:s,children:"Close"})})]})}function p(e){let{sites:r,loading:s,onSiteAdded:i}=e,n=(0,o.useRouter)(),[l,d]=(0,a.useState)(!1),[c,p]=(0,a.useState)(!1),[g,j]=(0,a.useState)(null),v=e=>{n.push("/dashboard/sites/".concat(e))},f=e=>{let s=r.find(r=>r.id===e);s&&(j(s),p(!0))},b=e=>{n.push("/dashboard/sites/".concat(e,"/settings"))};return s?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(h.y$,{size:"lg"})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Your Sites"}),(0,t.jsxs)(h.$n,{onClick:()=>d(!0),children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Site"]})]}),0===r.length?(0,t.jsxs)("div",{className:"text-center py-16 bg-white dark:bg-gray-800 rounded-lg border border-border",children:[(0,t.jsx)("svg",{className:"w-16 h-16 mx-auto text-muted-foreground mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),(0,t.jsx)("h2",{className:"text-xl font-medium mb-2",children:"No sites yet"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Get started by adding your first site to track"}),(0,t.jsx)(h.$n,{onClick:()=>d(!0),size:"lg",children:"Add Your First Site"})]}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(e=>(0,t.jsx)(x,{site:e,onView:v,onViewSnippet:f,onEdit:b},e.id))}),(0,t.jsx)(m,{isOpen:l,onClose:()=>d(!1),onSuccess:e=>{null==i||i({...e,pageviews:0,visitors:0,status:"pending"}),d(!1),j({...e,pageviews:0,visitors:0}),p(!0)}}),(0,t.jsx)(u,{isOpen:c,onClose:()=>{p(!1),j(null)},siteId:(null==g?void 0:g.id)||"",domain:null==g?void 0:g.domain})]})}}}]);