# =============================================================================
# ZERO TRUST ANALYTICS - ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and fill in your values
# All required variables MUST be set for the application to start

# -----------------------------------------------------------------------------
# REQUIRED ENVIRONMENT VARIABLES (validated on startup)
# -----------------------------------------------------------------------------

# JWT Secret (REQUIRED)
# Used for signing authentication tokens
# MUST be at least 32 characters long for security
# Generate with: openssl rand -base64 32
JWT_SECRET=your-jwt-secret-key-at-least-32-characters-long-replace-this

# Turso Database URL (REQUIRED)
# Format: libsql://[DATABASE_NAME]-[ORG_NAME].turso.io
# For local development: file:local.db
TURSO_DATABASE_URL=libsql://your-database-name.turso.io

# Turso Auth Token (REQUIRED)
# Get from: turso db tokens create [DATABASE_NAME]
# For local file databases, this can be an empty string
TURSO_AUTH_TOKEN=your-turso-auth-token

# -----------------------------------------------------------------------------
# OPTIONAL ENVIRONMENT VARIABLES (with validated defaults)
# -----------------------------------------------------------------------------

# JWT Token Expiry (default: 7d)
# Format: number + unit (m=minutes, h=hours, d=days, w=weeks, y=years)
JWT_EXPIRY=7d

# Allowed CORS Origins (default: http://localhost:3000,http://localhost:8888)
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8888

# Node Environment (default: development)
# Options: development, production, test
NODE_ENV=development

# Rate Limiting - Default Max Requests (default: 100)
RATE_LIMIT_MAX=100

# Rate Limiting - Default Window Size in ms (default: 900000 = 15 minutes)
RATE_LIMIT_WINDOW=900000

# Rate Limiting - Login Endpoint (default: 10 requests per minute)
RATE_LIMIT_LOGIN_MAX=10
RATE_LIMIT_LOGIN_WINDOW=60000

# Rate Limiting - Register Endpoint (default: 5 requests per minute)
RATE_LIMIT_REGISTER_MAX=5
RATE_LIMIT_REGISTER_WINDOW=60000

# Rate Limiting - Tracking Endpoint (default: 1000 requests per minute)
RATE_LIMIT_TRACK_MAX=1000
RATE_LIMIT_TRACK_WINDOW=60000

# Rate Limiting - API Endpoints (default: 100 requests per minute)
RATE_LIMIT_API_MAX=100
RATE_LIMIT_API_WINDOW=60000

# Session Max Age in seconds (default: 604800 = 7 days)
SESSION_MAX_AGE=604800

# MFA Issuer Name (default: Zero Trust Analytics)
MFA_ISSUER=Zero Trust Analytics

# -----------------------------------------------------------------------------
# ADDITIONAL OPTIONAL VARIABLES
# -----------------------------------------------------------------------------

# Required: Secret for hashing visitor IDs (generate a random string)
HASH_SECRET=your-random-secret-here

# Required: Stripe API keys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Required: Stripe Price ID for $10/month subscription
# Create this in Stripe Dashboard > Products > Add Product
STRIPE_PRICE_ID=price_your_price_id

# Optional: Site URL (Netlify sets this automatically)
# URL=https://your-site.netlify.app

# Email Service: At least one is required for password reset emails
# Resend (primary) - Get your API key at https://resend.com
RESEND_API_KEY=re_your_resend_api_key

# SendGrid (fallback) - Get your API key at https://sendgrid.com
SENDGRID_API_KEY=SG.your_sendgrid_api_key

# Optional: From email address for password reset emails
# FROM_EMAIL=noreply@yourdomain.com

# Optional: Google Search Console Integration
# Get credentials at https://console.cloud.google.com/apis/credentials
# Required scopes: https://www.googleapis.com/auth/webmasters.readonly
# GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=your-google-client-secret

# Optional: Turso Database (alternative to Netlify Blobs for self-hosting)
# TURSO_DATABASE_URL=libsql://your-database.turso.io
# TURSO_AUTH_TOKEN=your-turso-auth-token

# GitHub OAuth - Optional for social login
# Get credentials at https://github.com/settings/developers
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret
GITHUB_REDIRECT_URI=https://zerotrustanalytics.com/api/auth/callback/github

# Google OAuth - Optional for social login (uses same credentials as GSC if configured)
# Get credentials at https://console.cloud.google.com/apis/credentials
GOOGLE_REDIRECT_URI=https://zerotrustanalytics.com/api/auth/callback/google
